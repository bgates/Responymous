"use strict";angular.module("responymous",["ngAnimate","ngCookies","ngTouch","ui.router","firebase"]).config(["$stateProvider","$urlRouterProvider",function(t,n){t.state("home",{url:"/",templateUrl:"app/partials/main.html",controller:"MainCtrl"}).state("student",{url:"/student",templateUrl:"app/partials/student.html",controller:"StudentCtrl"}).state("instructor",{url:"/instructor",templateUrl:"app/partials/instructor.html",controller:"ResponseCtrl"}),n.otherwise("/")}]).constant("CONFIG",{Firebase:{baseUrl:"https://responymousdevdb.firebaseio.com"}}),angular.module("responymous").factory("Firebase",["CONFIG",function(t){return new Firebase(t.Firebase.baseUrl)}]).factory("Auth",["Firebase","$firebaseAuth","$firebase",function(t,n,e){function a(n){if(null===n)return null;var a=e(t.child("users").child(n.github.id)).$asObject();return angular.extend(a,{access_token:n.github.accessToken,email:n.github.email,name:n.github.displayName,last_vote:5,current_class:"Q42014FEEORL",student:!0}),a.$save(),a}var s=n(t);return{onAuth:function(t){s.$onAuth(function(n){t(a(n))})},login:function(){return s.$authWithOAuthRedirect("github")},logout:function(){s.$unauth()}}}]).controller("MainCtrl",["Auth",function(t){var n=this;this.login=t.login,this.logout=t.logout,t.onAuth(function(t){n.user=t})}]),angular.module("responymous").controller("ResponseCtrl",["CONFIG",function(t){var n=new Firebase(t.Firebase.baseUrl),e="Q42014FEEORL",a=n.child("classes/"+e+"/vote_totals");a.on("child_changed",function(){a.child("1").once("value",function(t){a.child("2").once("value",function(n){red=t.val()+n.val()})}),a.child("3").once("value",function(t){yellow=t.val()}),a.child("4").once("value",function(t){a.child("5").once("value",function(n){green=t.val()+n.val()})});var t=red+yellow+green,n=[{count:red,percent:(red/t*100).toFixed(2)+"%"},{count:yellow,percent:(yellow/t*100).toFixed(2)+"%"},{count:green,percent:(green/t*100).toFixed(2)+"%"}];$("#red").width(n[0].percent).children("div").text(n[0].count),$("#yellow").width(n[1].percent).children("div").text(n[1].count),$("#green").width(n[2].percent).children("div").text(n[2].count)})}]),angular.module("responymous").controller("StudentCtrl",["CONFIG","$timeout",function(t,n){var e=new Firebase(t.Firebase.baseUrl),a=this;this.isDisabled=!1,this.addVote=function(t){this.isDisabled=!0;var s=(new Date).toISOString().slice(0,10).replace(/-/g,""),l="8822941",o="Q42014FEEORL";e.child("votes").push({class_id:o,timestamp:Firebase.ServerValue.TIMESTAMP,date:s,score:t,student_id:l});var r=e.child("users/"+l+"/last_vote"),i=e.child("classes/"+o+"/vote_totals");r.once("value",function(n){i.once("value",function(){var e=i.child(n.val());e.transaction(function(t){return t-1});var a=i.child(t);a.transaction(function(t){return t+1}),r.set(t)})},function(t){console.log("The read failed: "+t.code)}),n(function(){a.isDisabled=!1},3e3)}}]),function(t){try{t=angular.module("responymous")}catch(n){t=angular.module("responymous",[])}t.run(["$templateCache",function(t){t.put("app/partials/instructor.html",'<br><br><div class="container" ng-controller="ResponseCtrl as response"><div class="progress"><div id="red" class="progress-bar progress-bar-danger"><div title="danger" class="bar" id="prgwidth"></div></div><div id="yellow" class="progress-bar progress-bar-warning" style="height:100px;"><div title="warning" class="bar" id="prgwidth"></div></div><div id="green" class="progress-bar progress-bar-success"><div title="success" class="bar" id="prgwidth"></div></div></div></div>')}])}(),function(t){try{t=angular.module("responymous")}catch(n){t=angular.module("responymous",[])}t.run(["$templateCache",function(t){t.put("app/partials/main.html",'<div class="container" ng-controller="MainCtrl as app"><div class="jumbotron text-center"><div ng-hide="app.user"><h1>Please login to continue...</h1><p><button class="btn btn-lg btn-primary" ng-click="app.login()">Login with GitHub</button></p></div><div ng-show="app.user"><h1>Hello, {{app.user.name}}!</h1><button class="btn btn-danger" ng-click="app.logout()">Logout</button></div></div></div>')}])}(),function(t){try{t=angular.module("responymous")}catch(n){t=angular.module("responymous",[])}t.run(["$templateCache",function(t){t.put("app/partials/student.html",'<div class="container" ng-controller="StudentCtrl as student"><h2 class="col-md-12 col-sm-12 col-xs-12">How are you tracking?</h2><div class="btn-group-vertical" role="group"><button type="button" class="btn btn-default" ng-click="student.addVote(5)" ng-disabled="student.isDisabled">5 - I am pwning these concepts</button></div><div class="btn-group-vertical" role="group"><button type="button" class="btn btn-default" ng-click="student.addVote(4)" ng-disabled="student.isDisabled">4 - Doing aight. I think I have a question or two</button></div><div class="btn-group-vertical" role="group"><button type="button" class="btn btn-default" ng-click="student.addVote(3)" ng-disabled="student.isDisabled">3 - It\'s starting to get fuzzy...</button></div><div class="btn-group-vertical" role="group"><button type="button" class="btn btn-default" ng-click="student.addVote(2)" ng-disabled="student.isDisabled">2 - So many questions. Much struggle.</button></div><div class="btn-group-vertical" role="group"><button type="button" class="btn btn-default" ng-click="student.addVote(1)" ng-disabled="student.isDisabled">1 - Totally lost. Halp.</button><h1 class="col-md-12 col-sm-12 col-xs-12">Thanks for your input!</h1></div><script type="text/javascript">\n\n  var $button = $(\'.btn\');\n\n  $button.click(function(){\n\n    //fades out the buttons (visual cue buttons are disabled)\n    $button.toggleClass(\'submit\');\n\n    //brings up "alert" message, more confirmation disabled buttons\n'+"    $('h1').toggleClass('display-h1')\n\n    setTimeout(function(){\n\n      $button.toggleClass('submit');\n      $('h1').toggleClass('display-h1');\n\n      }, 3000);\n    });\n\n\n\n</script></div>")}])}(),function(t){try{t=angular.module("responymous")}catch(n){t=angular.module("responymous",[])}t.run(["$templateCache",function(t){t.put("components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></nav>')}])}();